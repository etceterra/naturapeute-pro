<script>
  async init() {
    this.state = {
      patient: {
        ZIP: "",
        birthdate: null,
        canton: "",
        city: "",
        email: "",
        firstName: "",
        gender: "",
        id: "",
        lastName: "",
        street: ""
      },
    }

    const response = await fetch(`https://naturapeute.ch/api/therapist/mesurebienetre@gmail.com`)
    if(!response.ok) return
    const profile = await response.json()
    this.state.patient = Object.assign(this.state.patient, profile.extraData.patients.find(p => p.id == state.id))
  }
</script>

<template>
  <form>
    <div class="col mt-2 mb-6">
      <!-- Card -->
    <div class="card testimonial-card">

      <!-- Background color -->
      <div class="card-up indigo lighten-1"></div>

      <!-- Avatar -->
      <div class="avatar mx-auto white">
        <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20%2810%29.jpg" class="rounded-circle"
          alt="woman avatar">
      </div>

      <!-- Content -->
      <div class="card-body">
        <div class="col mt-2 mb-6">
          <div class="border border-light p-5">
            <h3 class="h3 mb-4 text-center">Informations de contact</h3>

            <div class="row">
              <ui-input class=col-sm label="Prénom" name="firstname" :bind="state.patient"></ui-input>
              <ui-input class=col-sm label="Nom" name="lastname" :bind="state.patient"></ui-input>
            </div>

            <div class=row>
              <div class=col-sm>
                <ui-input type=email label="Email" name="email" :bind="state.patient"></ui-input>
              </div>

              <div class=col-sm>
                <ui-input label="Téléphone" name="phone" :bind="state.patient"></ui-input>
              </div>

            </div>
            <div class=row>
              <div class=col-sm>
                <ui-input type=url label="Site internet" name="website" :bind="state.patient"></ui-input>
              </div>
              <div class=col-sm>
                <ui-input type=url label="Page facebook" name="facebook" :bind="state.patient"></ui-input>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <!-- Card -->
  </form>
  </div>
</template>

<style>
  @import url('/app/css/main.css');
</style>
