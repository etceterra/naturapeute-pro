<script>
  async init() {
    this.state = {
      clients: []
    }

    const response = await fetch(`https://naturapeute.ch/api/therapist/mesurebienetre@gmail.com`)
    if(!response.ok) return
    const json = await response.json()
    this.state.clients = json.extraData.patients
  }
</script>

<template>
  <div class="card">
    <section class="p-md-3 mx-md-5 text-lg-left">
      <h2 class="text-center font-weight-bold mb-4 pb-1">Mes clients</h2>
      <p class="text-center lead mb-5 pb-2 text-muted">L'ensemble de vos clients.</p>
      <div class="row">
        <div :for="client in state.clients" class="col-lg-4 col-sm-6 mb-5">
          <div class="row d-flex align-items-center">
            <div
              class="col-5 avatar w-100 white d-flex justify-content-center align-items-center"
            >
              <img
                src="https://www.gravatar.com/avatar/${md5(client.email)}"
                class="img-fluid rounded-circle z-depth-1"
              />
            </div>
            <div class="col-7">
              <h6 class="font-weight-bold pt-2">${client.firstName} ${client.lastName}</h6>
              <p class="text-muted">
                ${(new Date(client.birthdate)).toLocaleDateString()}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<style>
  @import url('/app/css/main.css');
</style>
